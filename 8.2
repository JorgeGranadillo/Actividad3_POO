import math
import tkinter as tk
from tkinter import messagebox

# ===========================
# Clase Notas: lógica del cálculo
# ===========================
class Notas:
    def __init__(self):
        self.lista_notas = []

    def set_notas(self, notas):
        self.lista_notas = notas

    def calcular_promedio(self):
        if not self.lista_notas:
            return 0.0
        return sum(self.lista_notas) / len(self.lista_notas)

    def calcular_desviacion_estandar(self):
        if len(self.lista_notas) < 2:
            return 0.0

        promedio = self.calcular_promedio()
        suma_cuadrados = sum(math.pow(nota - promedio, 2) for nota in self.lista_notas)
        return math.sqrt(suma_cuadrados / len(self.lista_notas))

    def calcular_menor(self):
        return min(self.lista_notas) if self.lista_notas else 0.0

    def calcular_mayor(self):
        return max(self.lista_notas) if self.lista_notas else 0.0


# ===========================
# Clase VentanaPrincipal: interfaz gráfica
# ===========================
class VentanaPrincipal(tk.Tk):
    def __init__(self):
        super().__init__()
        self.notas = Notas()
        self.title("Cálculo de Notas")
        self.geometry("280x380")
        self.resizable(False, False)
        self.eval("tk::PlaceWindow . center")
        self.crear_widgets()

    def crear_widgets(self):
        # Campos de entrada de notas
        self.campos_notas = []
        for i in range(5):
            y_pos = 20 + i * 30
            etiqueta = tk.Label(self, text=f"Nota {i+1}:")
            etiqueta.place(x=20, y=y_pos, width=80, height=23)
            campo = tk.Entry(self)
            campo.place(x=105, y=y_pos, width=135, height=23)
            self.campos_notas.append(campo)

        # Botones
        boton_calcular = tk.Button(self, text="Calcular", command=self.calcular)
        boton_calcular.place(x=20, y=170, width=100, height=25)

        boton_limpiar = tk.Button(self, text="Limpiar", command=self.limpiar)
        boton_limpiar.place(x=130, y=170, width=100, height=25)

        # Etiquetas de resultados
        self.promedio_lbl = tk.Label(self, text="Promedio:", anchor="w")
        self.promedio_lbl.place(x=20, y=210, width=240, height=23)

        self.desviacion_lbl = tk.Label(self, text="Desviación Estándar:", anchor="w")
        self.desviacion_lbl.place(x=20, y=240, width=240, height=23)

        self.mayor_lbl = tk.Label(self, text="Nota Mayor:", anchor="w")
        self.mayor_lbl.place(x=20, y=270, width=240, height=23)

        self.menor_lbl = tk.Label(self, text="Nota Menor:", anchor="w")
        self.menor_lbl.place(x=20, y=300, width=240, height=23)

    def limpiar(self):
        """Limpia los campos de texto y los resultados."""
        for campo in self.campos_notas:
            campo.delete(0, tk.END)
        self.promedio_lbl.config(text="Promedio:")
        self.desviacion_lbl.config(text="Desviación Estándar:")
        self.mayor_lbl.config(text="Nota Mayor:")
        self.menor_lbl.config(text="Nota Menor:")

    def calcular(self):
        """Lee las notas, valida y calcula resultados."""
        notas_ingresadas = []
        try:
            for campo in self.campos_notas:
                nota = float(campo.get())
                if nota < 0 or nota > 5:
                    raise ValueError("Las notas deben estar entre 0 y 5.")
                notas_ingresadas.append(nota)
        except ValueError:
            messagebox.showerror("Error de Entrada", "Por favor, ingrese solo números válidos entre 0 y 5.")
            return

        self.notas.set_notas(notas_ingresadas)
        promedio = self.notas.calcular_promedio()
        desviacion = self.notas.calcular_desviacion_estandar()
        menor = self.notas.calcular_menor()
        mayor = self.notas.calcular_mayor()

        # Mostrar resultados
        self.promedio_lbl.config(text=f"Promedio: {promedio:.2f}")
        self.desviacion_lbl.config(text=f"Desviación Estándar: {desviacion:.2f}")
        self.mayor_lbl.config(text=f"Nota Mayor: {mayor:.2f}")
        self.menor_lbl.config(text=f"Nota Menor: {menor:.2f}")


# ===========================
# Punto de entrada del programa
# ===========================
if __name__ == "__main__":
    app = VentanaPrincipal()
    app.mainloop()
